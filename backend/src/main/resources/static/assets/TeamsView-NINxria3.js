import{_ as Q}from"./PageTemplate.vue_vue_type_script_setup_true_lang-CIGvSZZL.js";import{d as f,o as l,c as y,g as d,i as L,e as i,w as n,u as e,h as x,b as p,r as b,j as U,k as J,n as z,a as P,m as B,f as k,l as R,p as Y,q as Z,s as ee,v as te,x as se,y as ae,z as q,t as oe}from"./index-CerfY1v_.js";import{a as G,b as ne,_ as w,L as re,C as W,i as le,u as ie,c as v,g as X,I as ce,k as de,O as ue,d as pe,A as me,o as fe}from"./Logo-Dfytd5dW.js";import{_ as A}from"./Label.vue_vue_type_script_setup_true_lang-aSr7c_nT.js";import{g as S}from"./cookiesUtils-DBv71A-o.js";/**
 * @license lucide-vue-next v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=G("ExternalLinkIcon",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-vue-next v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=G("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=G("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xe={class:"border border-gray-300 rounded-lg p-2 md:p-3 my-4"},ye=d("h1",{class:"text-3xl font-title-bold"},"Liste des équipes créées",-1),be=[ye],ve=f({__name:"TeamsCreated",setup(o){return(t,s)=>(l(),y("div",xe,be))}}),$e={},we={class:"border border-gray-300 rounded-lg p-2 md:p-3 my-4"},ke=d("h1",{class:"font-bold text-base"},"Il n'y a pas encore d'équipes",-1),Te=d("p",{class:"text-gray-400 text-sm"},"Les équipes n'ont pas encore été crées par le project leader.",-1),Ve=[ke,Te];function Ce(o,t){return l(),y("div",we,Ve)}const qe=ne($e,[["render",Ce]]),Pe={class:"border border-gray-300 rounded-lg p-2 md:p-3 my-4"},Oe=d("h1",{class:"font-bold text-base"},"Vous n'avez pas encore importé les étudiants",-1),Le=d("p",{class:"text-gray-400 text-sm"},"Pour générer les équipes, il faut commencer par importer les étudiants.",-1),Se={class:"w-full pt-5 pb-2 px-0 flex justify-center"},ze=f({__name:"StudentsNotImported",setup(o){return(t,s)=>{const a=L("RouterLink");return l(),y("div",Pe,[Oe,Le,d("div",Se,[i(a,{to:"/students"},{default:n(()=>[i(e(w),{class:"text-white bg-primary hover:bg-primary/90 flex items-center"},{default:n(()=>[i(e(_e),{class:"w-4 h-4 mr-2"}),x(" Importer les étudiants ")]),_:1})]),_:1})])])}}}),Be={class:"w-full h-screen flex flex-col items-center justify-center gap-6"},Ge=d("div",{class:"flex flex-col items-center justify-center"},[d("h1",{class:"text-4xl font-title-medium"},"Non autorisé"),d("p",{class:"text-md"},"Vous n'avez pas l'autorisation d'accéder à cette page.")],-1),F=f({__name:"NotAuthorized",setup(o){return(t,s)=>{const a=L("Button"),r=L("RouterLink");return l(),y("div",Be,[i(re,{class:"h-64 fill-grey"}),Ge,i(r,{to:"/"},{default:n(()=>[i(a,{class:"text-white"},{default:n(()=>[x("Retour à l'accueil")]),_:1})]),_:1})])}}}),Ne=f({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:t}){const r=W(o,t);return(u,c)=>(l(),p(e(le),U(J(e(r))),{default:n(()=>[b(u.$slots,"default")]),_:3},16))}}),De=f({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const t=o;return(s,a)=>(l(),p(e(ie),U(J(t)),{default:n(()=>[b(s.$slots,"default")]),_:3},16))}}),Ie=f({__name:"DialogHeader",props:{class:{}},setup(o){const t=o;return(s,a)=>(l(),y("div",{class:z(e(v)("flex flex-col gap-y-1.5 text-center sm:text-left",t.class))},[b(s.$slots,"default")],2))}}),Ee=f({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,s=P(()=>{const{class:r,...u}=t;return u}),a=X(s);return(r,u)=>(l(),p(e(ce),B(e(a),{class:e(v)("text-lg font-semibold leading-none tracking-tight",t.class)}),{default:n(()=>[b(r.$slots,"default")]),_:3},16,["class"]))}}),Me=f({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const t=o,s=P(()=>{const{class:r,...u}=t;return u}),a=X(s);return(r,u)=>(l(),p(e(de),B(e(a),{class:e(v)("text-sm text-muted-foreground",t.class)}),{default:n(()=>[b(r.$slots,"default")]),_:3},16,["class"]))}}),je=d("span",{class:"sr-only"},"Close",-1),Re=f({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:t}){const s=o,a=t,r=P(()=>{const{class:c,...m}=s;return m}),u=W(r,a);return(c,m)=>(l(),p(e(fe),null,{default:n(()=>[i(e(ue),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),i(e(me),B(e(u),{class:e(v)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s.class)}),{default:n(()=>[b(c.$slots,"default"),i(e(pe),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:n(()=>[i(e(he),{class:"w-4 h-4"}),je]),_:1})]),_:3},16,["class"])]),_:3}))}}),Ae=f({__name:"DialogFooter",props:{class:{}},setup(o){const t=o;return(s,a)=>(l(),y("div",{class:z(e(v)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",t.class))},[b(s.$slots,"default")],2))}});typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Fe=o=>typeof o<"u";function He(o){return JSON.parse(JSON.stringify(o))}function Ue(o,t,s,a={}){var r,u,c;const{clone:m=!1,passive:g=!1,eventName:$,deep:N=!1,defaultValue:K,shouldEmit:D}=a,h=Y(),I=s||(h==null?void 0:h.emit)||((r=h==null?void 0:h.$emit)==null?void 0:r.bind(h))||((c=(u=h==null?void 0:h.proxy)==null?void 0:u.$emit)==null?void 0:c.bind(h==null?void 0:h.proxy));let T=$;t||(t="modelValue"),T=T||`update:${t.toString()}`;const E=_=>m?typeof m=="function"?m(_):He(_):_,M=()=>Fe(o[t])?E(o[t]):K,j=_=>{D?D(_)&&I(T,_):I(T,_)};if(g){const _=M(),O=k(_);let V=!1;return R(()=>o[t],C=>{V||(V=!0,O.value=E(C),Z(()=>V=!1))}),R(O,C=>{!V&&(C!==o[t]||N)&&j(C)},{deep:N}),O}else return P({get(){return M()},set(_){j(_)}})}const H=f({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(o,{emit:t}){const s=o,r=Ue(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(u,c)=>ee((l(),y("input",{"onUpdate:modelValue":c[0]||(c[0]=m=>se(r)?r.value=m:null),class:z(e(v)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s.class))},null,2)),[[te,e(r)]])}}),Je={class:"border border-gray-300 rounded-lg p-2 md:p-3 my-4"},We=d("h1",{class:"font-bold text-base"},"Vous n'avez pas encore créer les équipes",-1),Xe=d("p",{class:"text-gray-400 text-sm"},"Maintenant que les étudiants sont importés, il vous suffit de générer les équipes automatiquement.",-1),Ke={class:"w-full pt-5 pb-2 px-0 flex justify-center"},Qe=d("span",{class:"mx-5 my-0"},"Générer les équipes",-1),Ye={class:"grid gap-4 py-4"},Ze={class:"grid grid-cols-4 items-center gap-4"},et={class:"grid grid-cols-4 items-center gap-4"},tt={key:0},st=f({__name:"GenerateTeams",setup(o){const t=k("6"),s=k("20"),a=ae({generateTeams:!0,loading:!1,showGeneratedTeams:!1}),r=k(""),u=async()=>{a.generateTeams=!1,a.loading=!0,a.showGeneratedTeams=!1;const m={method:"POST",headers:{"Content-Type":"application/json",Authorization:S("token")||"null"},body:JSON.stringify({nbTeams:t.value,ratioGender:s.value})};try{const g=await fetch("http://localhost:8882/api/teams/create-teams",m);if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);a.loading=!1,a.showGeneratedTeams=!0,a.generateTeams=!0}catch{r.value="Erreur lors de la communication avec le serveur",a.loading=!1,a.generateTeams=!0}},c=()=>{console.log("ouai la teams")};return(m,g)=>(l(),y("div",Je,[We,Xe,d("div",Ke,[i(e(Ne),null,{default:n(()=>[i(e(De),{"as-child":""},{default:n(()=>[i(e(w),null,{default:n(()=>[Qe]),_:1})]),_:1}),i(e(Re),{class:"sm:max-w-[500px]"},{default:n(()=>[i(e(Ie),null,{default:n(()=>[i(e(Ee),null,{default:n(()=>[x("Générer les équipes")]),_:1}),i(e(Me),null,{default:n(()=>[x(" Modifiez les paramètres de génération, puis cliquez sur le bouton pour générer automatiquement les équipes. ")]),_:1})]),_:1}),d("div",Ye,[d("div",Ze,[i(e(A),{for:"nbTeams",class:"text-right"},{default:n(()=>[x(" Nombre d'équipes ")]),_:1}),i(e(H),{id:"nbTeams",modelValue:t.value,"onUpdate:modelValue":g[0]||(g[0]=$=>t.value=$),class:"col-span-3"},null,8,["modelValue"])]),d("div",et,[i(e(A),{for:"ratioGender",class:"text-right"},{default:n(()=>[x(" Ratio H/F (%) ")]),_:1}),i(e(H),{id:"ratioGender",modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=$=>s.value=$),class:"col-span-3"},null,8,["modelValue"])])]),i(e(Ae),null,{default:n(()=>[a.generateTeams?(l(),p(e(w),{key:0,type:"submit",variant:"destructive",onClick:u,class:"text-white bg-primary hover:bg-primary/90"},{default:n(()=>[x(" Regénérer les équipes ")]),_:1})):q("",!0),a.loading?(l(),p(e(w),{key:1,type:"submit",variant:"destructive",disabled:"",class:"flex items-center text-white bg-primary hover:bg-primary/90"},{default:n(()=>[i(e(ge),{class:"w-4 h-4 mr-2 animate-spin"}),x(" Veuillez patienter ")]),_:1})):q("",!0),a.showGeneratedTeams?(l(),p(e(w),{key:2,type:"submit",variant:"destructive",onClick:c,class:"text-white bg-primary hover:bg-primary/90"},{default:n(()=>[x(" Voir les équipes générées ")]),_:1})):q("",!0)]),_:1}),r.value?(l(),y("p",tt,oe(r.value),1)):q("",!0)]),_:1})]),_:1})])]))}}),at=d("h1",{class:"text-3xl font-title-bold"},"Equipes",-1),ct=f({__name:"TeamsView",setup(o){const t=S("token"),s=S("role"),a=k(""),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:t||"null"}};return(async()=>{try{const c=await fetch("http://localhost:8882/api/projects/current-phase",r);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const m=await c.text();a.value=m}catch(c){console.error(c)}})(),(c,m)=>(l(),p(Q,null,{default:n(()=>[at,!e(t)||!e(s)?(l(),p(F,{key:0})):e(s)==="PL"&&a.value===""?(l(),p(ze,{key:1})):e(s)==="PL"&&a.value==="COMPOSING"?(l(),p(st,{key:2})):(e(s)==="PL"||e(s)==="SS"||e(s)==="OL")&&a.value==="PREPUBLISHED"?(l(),p(ve,{key:3})):(e(s)==="SS"||e(s)==="OL")&&a.value==="COMPOSING"?(l(),p(qe,{key:4})):(l(),p(F,{key:5}))]),_:1}))}});export{ct as default};
